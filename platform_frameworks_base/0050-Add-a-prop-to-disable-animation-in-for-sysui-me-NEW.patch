From af1f81bfd6111b366105f673ac5fe63d177495f4 Mon Sep 17 00:00:00 2001
From: harvey186 <harvey186@hotmail.com>
Date: Wed, 3 Dec 2025 16:06:00 +0100
Subject: [PATCH] 0050-Add-a-prop-to-disable-animation-in-for-sysui-media-c

Change-Id: Ie07f9320173d3627e7cf5f8810420bb4ba536703
---
 .../media/controls/ui/controller/MediaCarouselController.kt    | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/packages/SystemUI/src/com/android/systemui/media/controls/ui/controller/MediaCarouselController.kt b/packages/SystemUI/src/com/android/systemui/media/controls/ui/controller/MediaCarouselController.kt
index b9056e0c9..ebb6d65bd 100644
--- a/packages/SystemUI/src/com/android/systemui/media/controls/ui/controller/MediaCarouselController.kt
+++ b/packages/SystemUI/src/com/android/systemui/media/controls/ui/controller/MediaCarouselController.kt
@@ -23,6 +23,7 @@ import android.content.Intent
 import android.content.res.ColorStateList
 import android.content.res.Configuration
 import android.database.ContentObserver
+import android.os.SystemProperties
 import android.os.UserHandle
 import android.provider.Settings
 import android.provider.Settings.ACTION_MEDIA_CONTROLS_SETTINGS
@@ -966,7 +967,7 @@ constructor(
                         desiredHostState.showsOnlyActiveMedia
 
                 for (mediaPlayer in MediaPlayerData.players()) {
-                    if (animate) {
+                    if (animate && !SystemProperties.getBoolean("persist.sys.phh.no_media_carousel_animation", false)) {
                         mediaPlayer.mediaViewController.animatePendingStateChange(
                             duration = duration,
                             delay = startDelay,
-- 
2.34.1

